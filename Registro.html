<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="Registro.css">
    <link rel="shortcut icon" href="http://laboro.azurewebsites.net/Imagem/logo.jpeg">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="perfis.js"></script>
    <title>Login</title>
</head>
<body>
    <div class="container">

        <header class="Cabecalho">
            
                <div class="Logo">
                    <a class="tampa" href="Default.html"> <img src="/Imagem/logo2.jpeg" alt="logo laboro" class="logotipo"> </a>
                    </div>
                
        </header>

        <div class="Imagem">
             <a class="tampa" href="Interface.html"> <img src="http://laboro.azurewebsites.net/Imagem/logo.jpeg" alt=""> </a>
        </div>

        <div class="Campo" id="form-regis">
            <input class="Email"  type="email" id="inputEmail" placeholder="Digite seu email">
            <input class="Nome"  type="text" id="inputNome" placeholder="Nome">
            <input class="Senha" id="inputSenha" type="password" placeholder="Senha">
            <input class="Confirmar" id="inputConfirmasenha" type="password"  placeholder="Confirmar Senha">
            <button id="btn-regis" onclick="inita()" class="Enviar">Cadastrar</button>
           <button class="Registrar" onclick="window.location.href = 'Registro.html'"> <a href="login.html">  Login </a></button>

        </div>

    </div>

 <script>


function inita() {
    // Adiciona funções para tratar os eventos 
    
    if($("#inputNome").val() == "" || $("#inputConfirmasenha").val() == "" || $("#inputSenha").val() == "" || $("#inputEmail").val() == "" )
    {
        alert("Preencha o formulário corretamente.");
        return;
    }

        //Verifica se a senha é igual

        if($("#inputConfirmasenha").val() != $('#inputSenha').val()){
            alert("Senhas diferentes");
            return;
        }

    else{
        for(i=0; i<dbperfis.data.length; i++) {
        if($("#inputNome").val() == dbperfis.data[i].nome ){
         alert("Usuário já existe");
         return;
         }
         if($("#inputEmail").val() == dbperfis.data[i].email ){
            alert("Email já cadastrado");
            return;
            }
        }}
        
        // Obtem os valores dos campos do formulário
        let campoNome = $("#inputNome").val();
        let campoConfirmasenha = $("#inputConfirmasenha").val();
        let campoEmail = $('#inputEmail').val();
        let campoSenha = $('#inputSenha').val();
        let contato = { nome: campoNome, Confirmasenha: campoConfirmasenha, email: campoEmail, websenha: campoSenha };

        insertContatoPerfil(contato);

       setTimeout( function() {
           window.location.href = "login.html";
         }, 1000 );
    };

 </script>
    
</body>
</html>
